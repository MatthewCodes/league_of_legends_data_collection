import requests
import json
import sys
import time
URL = 'https://na1.api.riotgames.com/lol/match/v4/matches/3187138923'

params = {'api_key':sys.argv[1]}

r = requests.get(url = URL, params = params)
player_ids = []
for player_id in r.json()["participantIdentities"]:
	print(player_id["player"]["accountId"])
	player_ids.append(player_id["player"]["accountId"])

gameIds = []
for player in player_ids:
	URL = 'https://na1.api.riotgames.com/lol/match/v4/matchlists/by-account/'+ player
	print(URL)
	r = requests.get(url = URL, params = params)
	print(json.dumps(r.json()))
	#matches = [x for x in r.json()["matches"]]
	for match in r.json()["matches"]:
		gameIds.append(match["gameId"])
		print(match["gameId"])
	print(len(gameIds))
	print(gameIds)
	time.sleep(10)
#print(json.dumps(r.json()["participantIdentities"], indent = 4))


